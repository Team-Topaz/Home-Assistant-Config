#This should be what reading a motion sensor looks like.
- id: door_sensor_bike_room
  alias: 'Door Sensor: Bike Room Lights On'
  trigger:
    platform: event
    event_type: button_pressed
    event_data: {"state": "on", "entity_id": "switch.bike_room_door_sensor"}
  action:
  - service: light.turn_on
    data:
      entity_id: light.bike_room_light

#This triggers if the front door is opened when the porch light is on, but the indoor lights are off.
#EG if the front door is opened when you arrive home.
- id: door_sensor_porch_unoccupied
  alias: 'Door Sensor: Front Door Unoccupied'
  trigger:
    platform: event
    event_type: button_pressed
    event_data: {"state": "on", "entity_id": "switch.front_door_sensor"}
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
        - condition: sun
          after: sunset
          after_offset: '-00:30:00'
        - condition: sun
          before: sunrise
          before_offset: '00:30:00'
      - condition: state
        entity_id: light.front_porch_light
        state: 'on'
      - condition: state
        entity_id: light.kitchen_overhead_lights
        state: 'off'
        for: 00:05:00
  action:
  - service: light.turn_on
    data:
      entity_id: light.kitchen_overhead_lights

#This triggers if the front door is opened when the indoor lights are turned on, but porch light is off.
#EG the front door is opened when you're home.
- id: door_sensor_porch_occupied
  alias: 'Door Sensor: Front Door Occupied'
  trigger:
    platform: event
    event_type: button_pressed
    event_data: {"state": "on", "entity_id": "switch.front_door_sensor"}
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
        - condition: sun
          after: sunset
          after_offset: '-00:30:00'
        - condition: sun
          before: sunrise
          before_offset: '00:30:00'
      - condition: state
        entity_id: light.kitchen_overhead_lights
        state: 'on'
      - condition: state
        entity_id: light.front_porch_light
        state: 'off'
        for: 00:05:00
  action:
  - service: light.turn_on
    data:
      entity_id: light.front_porch_light

#Master bedroom automations.
#The idea is that when you open the door at night, the light turns on at a low
#level for a few minutes.
- id: door_sensor_mbed_nightlight
  alias: 'Door Sensor: Master Bedroom Nightlight'
  initial_state: 'off'
  trigger:
    platform: event
    event_type: button_pressed
    event_data: {"state": "on", "entity_id": "switch.master_bedroom_door_sensor"}
  action:
  - service: light.turn_on
    data:
      entity_id: light.kitchen_overhead_lights
      brightness_pct: 25
  - service: light.turn_on
    data:
      entity_id: light.living_room_floor_lamp
      brightness_pct: 25
  - service: light.turn_on
    data:
      entity_id: light.dining_room_chandelier
      brightness_pct: 25
