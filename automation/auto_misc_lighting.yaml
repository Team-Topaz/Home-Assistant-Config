- id: living_room_and_dining_on_special
  #Turns on all main space lights when favorite button is pressed.
  alias: 'Living Room: Hallway Favorite Button'
  trigger:
    - platform: numeric_state
      entity_id: light.kitchen
      value_template: "{{ state.attributes.brightness }}"
      above: 251
      below: 253
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: light.dining
        state: 'off'
      - condition: state
        entity_id: light.floor_lamp
        state: 'off'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_room_all_on

- id: living_room_and_dining_off_special
  #Turns on all main space lights when favorite button is pressed.
  alias: 'Living Room: Hallway Favorite Button'
  trigger:
    - platform: numeric_state
      entity_id: light.kitchen
      value_template: "{{ state.attributes.brightness }}"
      above: 251
      below: 253
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: light.dining
        state: 'on'
      - condition: state
        entity_id: light.floor_lamp
        state: 'on'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_kitchen_only

- id: living_room_lamp_on_at_sunset
  alias: 'Living Room: Turn On Floor Lamp and Dining Slow Fade'
  trigger:
    - platform: numeric_state
      entity_id: sun.sun
      value_template: "{{ state.attributes.elevation }}"
      below: 5
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
          - condition: numeric_state
            entity_id: sun.sun
            value_template: "{{ state.attributes.elevation }}"
            below: 5
          - condition: numeric_state
            entity_id: sensor.sn2_ldr
            below: 500
      - condition: state
        entity_id: light.kitchen
        state: 'on'
  action:
    - service: light.turn_on
      data:
        entity_id: light.dining
        brightness_pct: 100
        transition: 900
    - service: light.turn_on
      data:
        entity_id: light.floor_lamp
        brightness_pct: 100
        transition: 900

- id: living_room_lamp_on_when_kitchen_on
  alias: 'Living Room: Turn On Floor Lamp and Dining'
  trigger:
    - platform: state
      entity_id: light.kitchen
      to: 'on'
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
          - condition: numeric_state
            entity_id: sun.sun
            value_template: "{{ state.attributes.elevation }}"
            below: 5
          - condition: numeric_state
            entity_id: sensor.sn2_ldr
            below: 500
      - condition: state
        entity_id: light.kitchen
        state: 'on'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_room_all_on



- id: living_room_lamp_off
  alias: 'Kitchen: Turn Off Dining and Living when Off'
  trigger:
    - platform: state
      entity_id: light.kitchen
      to: 'off'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_and_dining_off


- id: reduce_default_dining_brightness
  alias: "Dining Room: Reduce brightness"
  initial_state: 'off'
  # Off because it's a demo.
  trigger:
    - platform: state
      entity_id: light.dining
      from: 'off'
      to: 'on'
  condition:
    - condition: template
      value_template: '{{ states.light.dining.attributes.brightness == 255 }}'
  action:
    - service: light.turn_on
      data:
        entity_id: light.dining
        brightness: 128
