- id: master_bedroom_pico_all_off
  #Turns off everything when pico off button is held
  alias: 'Master Bedroom: Pico Lights Out'
  trigger:
    - platform: state
      entity_id: sensor.master_bedroom_ryan_pico
      from: '0'
      to: '4'
      for:
        seconds: 1
    - platform: state
      entity_id: sensor.master_bedroom_chelsea_pico
      from: '0'
      to: '4'
      for:
        seconds: 1
  action:
    - service: light.turn_off
      entity_id: group.indoor_lights
    - service: light.turn_off
      entity_id: group.outdoor_lights
    - service: light.turn_off
      entity_id: group.xmas_lights
    - service: light.turn_off
      entity_id: group.indoor_lights
    - service: remote.turn_off
      entity_id: remote.living_room

- id: living_room_and_dining_on_special
  #Turns on all main space lights when favorite button is pressed.
  alias: 'Living Room: Hallway Favorite On'
  trigger:
    - platform: state
      entity_id: sensor.hallway_pico
      from: '0'
      to: '2'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: light.dining_room_chandelier
        state: 'off'
      - condition: state
        entity_id: light.living_room_floor_lamp
        state: 'off'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_room_all_on

- id: living_room_and_dining_off_special
  #Turns on all main space lights when favorite button is pressed.
  alias: 'Living Room: Hallway Favorite Off'
  trigger:
    - platform: state
      entity_id: sensor.hallway_pico
      from: '0'
      to: '2'
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: light.dining_room_chandelier
        state: 'on'
      - condition: state
        entity_id: light.living_room_floor_lamp
        state: 'on'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_kitchen_only

- id: living_room_lamp_on_at_sunset
  alias: 'Living Room: Turn On Floor Lamp and Dining Slow Fade'
  trigger:
    - platform: numeric_state
      entity_id: sun.sun
      value_template: "{{ state.attributes.elevation }}"
      below: 5
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
          - condition: numeric_state
            entity_id: sun.sun
            value_template: "{{ state.attributes.elevation }}"
            below: 5
          - condition: numeric_state
            entity_id: sensor.living_roombrightness
            below: 500
      - condition: state
        entity_id: light.kitchen_overhead_lights
        state: 'on'
  action:
    - service: light.turn_on
      data:
        entity_id: light.dining_room_chandelier
        brightness_pct: 100
        transition: 450
    - service: light.turn_on
      data:
        entity_id: light.living_room_floor_lamp
        brightness_pct: 100
        transition: 450

- id: living_room_lamp_on_when_kitchen_on
  alias: 'Living Room: Turn On Floor Lamp and Dining'
  trigger:
    - platform: state
      entity_id: sensor.hallway_pico
      from: '0'
      to: '1'
  condition:
    condition: and
    conditions:
      - condition: or
        conditions:
          - condition: numeric_state
            entity_id: sun.sun
            value_template: "{{ state.attributes.elevation }}"
            below: 5
          - condition: numeric_state
            entity_id: sensor.living_roombrightness
            below: 700
      - condition: state
        entity_id: light.kitchen_overhead_lights
        state: 'on'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_room_all_on



- id: living_room_lamp_off
  alias: 'Kitchen: Turn Off Dining and Living when Off'
  trigger:
    - platform: state
      entity_id: sensor.hallway_pico
      from: '0'
      to: '4'
  action:
    - service: scene.turn_on
      entity_id: scene.caseta_living_and_dining_off


- id: reduce_default_dining_brightness
  alias: "Dining Room: Reduce brightness"
  initial_state: 'off'
  # Off because it's a demo.
  trigger:
    - platform: state
      entity_id: light.dining_room_chandelier
      from: 'off'
      to: 'on'
  condition:
    - condition: template
      value_template: '{{ states.light.dining_room_chandelier.attributes.brightness == 255 }}'
  action:
    - service: light.turn_on
      data:
        entity_id: light.dining_room_chandelier
        brightness: 128
