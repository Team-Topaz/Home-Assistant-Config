- platform: plex
  host: 192.168.1.20
  port: 32400
  name: Plex
  username: !secret plex_username
  password: !secret plex_password

- platform: systemmonitor
  scan_interval: 240
  resources:
    - type: disk_use_percent
      arg: /
    - type: memory_use_percent
    - type: load_1m

- platform: uptime

- platform: rpi_power

- platform: template
  sensors:
    ryan_phone_battery:
      friendly_name: "Ryan Phone Battery"
      value_template: >
        {% if states.device_tracker.ryan_phone %}
          {{ states.device_tracker.ryan_phone.attributes.battery | int }}
        {% else %}
          unknown
        {% endif %}
      unit_of_measurement: '%'
      icon_template: >
        {% if states.device_tracker.ryan_phone.attributes.battery >= 90 %}
          mdi:battery
        {% elif states.device_tracker.ryan_phone.attributes.battery > 0 %}
          mdi:battery-{{(states.device_tracker.ryan_phone.attributes.battery | int / 10) | int + 1}}0
        {% else %}
          mdi:battery-unknown
        {% endif %}

- platform: template
  sensors:
    chelsea_phone_battery:
      friendly_name: "Chelsea Phone Battery"
      value_template: >
        {% if states.device_tracker.chelsea_phone %}
          {{ states.device_tracker.chelsea_phone.attributes.battery | int }}
        {% else %}
          unknown
        {% endif %}
      unit_of_measurement: '%'
      icon_template: >
        {% if states.device_tracker.chelsea_phone.attributes.battery >= 90 %}
          mdi:battery
        {% elif states.device_tracker.chelsea_phone.attributes.battery > 0 %}
          mdi:battery-{{(states.device_tracker.chelsea_phone.attributes.battery | int / 10) | int + 1}}0
        {% else %}
          mdi:battery-unknown
        {% endif %}
